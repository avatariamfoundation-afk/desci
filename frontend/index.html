<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DeSci Demo</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background: #fafafa; }
  form { max-width: 400px; background: white; padding: 15px; border-radius: 8px; box-shadow: 0 0 10px #ccc; margin-bottom: 20px; }
  input, button { width: 100%; margin: 10px 0; padding: 10px; font-size: 1em; }
  button { background: #007bff; color: white; border: none; cursor: pointer; }
  button:hover { background: #0056b3; }
  #result { margin-top: 20px; font-weight: bold; }
</style>
</head>
<body>
<h1>DeSci Demo: Research Networks & Verifiable Computation</h1>

<form id="verifyForm">
  <input type="text" id="researchId" placeholder="Research ID" required />
  <input type="text" id="biomedData" placeholder="Biomed Data" required />
  <button type="submit">Verify Research</button>
</form>

<form id="federateForm">
  <input type="text" id="federateId" placeholder="Research ID to Federate" required />
  <button type="submit">Federate to BioSync</button>
</form>

<form id="colabForm">
  <input type="text" id="colabId" placeholder="Research ID for Co-Lab" required />
  <button type="submit">Get Co-Lab Results</button>
</form>

<div id="result"></div>

<script>
  const resultDiv = document.getElementById('result');

  async function postData(url = '', data = {}) {
    const response = await fetch(url, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
    return response.json();
  }

  document.getElementById('verifyForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const response = await postData('/research/verify', {
      researchId: e.target.researchId.value,
      biomedData: e.target.biomedData.value
    });
    resultDiv.textContent = response.receipt || response.error || JSON.stringify(response);
  });

  document.getElementById('federateForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const response = await postData('/research/federate', {
      researchId: e.target.federateId.value
    });
    resultDiv.textContent = response.status || response.error || JSON.stringify(response);
  });

  document.getElementById('colabForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const response = await fetch(`/research/colab/${e.target.colabId.value}`);
    const result = await response.json();
    resultDiv.textContent = result.coLabResults || result.error || JSON.stringify(result);
  });
</script>
</body>
</html>
